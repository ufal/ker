<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
  <title>KER</title>
  <meta content="width=device-width" name="viewport" />
  <meta content="Language Resources, Infrastructure, Research,           Natural Language Processing, Multimedia, Czech language, Computational           Linguistics, Speech, Text, Corpus, Corpora" name="keywords" />
  <meta content="LINDAT CLARIN Research Infrastructure" name="description" />

  <link rel="stylesheet" href="https://lindat.mff.cuni.cz/common/public/css/lindat.css" type="text/css" />

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" type="text/javascript"> </script>
  <script type="text/javascript">
function submitQuery() {
    file = $("#file").get(0).files[0];
    alert(file.name);
}

$(function () {
    document.domain = "cuni.cz";
    $("#resultBox").hide();

    $('#header').load("https://lindat.mff.cuni.cz/common/header-services-standalone.htm");
    $('#footer').load("https://lindat.mff.cuni.cz/common/footer-services-standalone.htm");

    $(':file').change(function(){
        var file = this.files[0];
        var name = file.name;
        var size = file.size;
        var type = file.type;

        if (size > 200000) {
            alert('File is too big for a web demo.');
                $(':file').val('');
        }
    });


    $('#submitButton').click(function(){
        var url = 'http://quest.ms.mff.cuni.cz:6380?language='+$('#language').val();
        var formData = new FormData();
	//formData.append("language", $("#language").val());

	if ($("#file").val()) {
            var file = $("#file")[0].files[0];
            formData.append("file", file)
	}
	else {
	    alert("Please, choose the file first.");
            return;
	}

        $.ajax({
            url: url,
            type: 'POST',
            success: function(data) { showResult(data); },
            error: function(jqXHR, textStatus, errorThrown) {
                alert("An error during communication with the server.");
            },

            // Form data
            data: formData,

            //Options to tell jQuery not to process data or worry about content-type.
            cache: false,
            contentType: false,
            processData: false
        });
    });
});

function showResult(data) {
    $("#resultBox").show();
    $("#keywordList").empty();

    for (i = 0; i < data.keywords.length; i++) {
        $("#keywordList").append("<li>"+data.keywords[i]+" <small>("+data.keyword_scores[i]+")</small></li>")
    }
}

    </script>

</head>

<body id="lindat-services">

<div id="header"></div>

<div class="lindat-common">
<div class="container" style="margin-left:70px;margin-right:70px">

    <div class="tcenter">
        <h1>KER - Keyword Extractor</h1>
    </div>

    <div class="dropdown pull-right">

        <div id="demo">

            <p>KER is a keyword extractor that was designed for
            scanned texts in Czech and English. It is based on the stadard
            <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">tf-idf algorithm</a>
            with the idf tables trained on texts from
            Wikipedia. To deal with the data sparsity, texts are preprocessed
            by <a href="http://lindat.mff.cuni.cz/services/morphodita/">Morphodita</a>:
            morphological dictionary and tagger. </p>

            <fieldset style="background:#EEE">
                langugage: <select id="language">
                    <option>cs</option>
                    <option>en</option>
                </select>  <br />
                file with content: <input id="file" type="file" /> <br />

                <input type="button" class="btn btn-primary" id="submitButton" value="Extract keywords" />
            </fieldset>

            <div id="resultBox" style="border:1px gray solid;background:#ffffe0;padding:10px;margin:3px">
                <b>Keywords</b>
                <ul id="keywordList"></ul>
            </div>
        </div>

        <div id="doc">
            <h2>Documentation</h2>

            <h3>Introduction</h3>

            This section serves as a reference how to use KER via the REST API. The
            service supports standard HTTP request and returns its output in the
            JSON format.

            <h3>Request</h3>

            <table border='1' cellspacing="0" cellpadding="4">
                <tr align="left">
                    <th>#</th>
                    <th>Parameter</th>
                    <th>Mandatory</th>
                    <th>Data type</th>
                    <th>Description</th>
                </tr>
                <tr align="left">
                    <td>1</td>
                    <td>file</td>
                    <td>yes</td>
                    <td>file</td>
                    <td>Plain-text file, ALTO XML file or a zip archive containing multiple files.</td>
                <tr>
                <tr align="left">
                    <td>2</td>
                    <td>language</td>
                    <td>no</td>
                    <td>string</td>
                    <td>Language the text is in. Supported langugaes are <b>cs</b> and <b>en</b>. Default value is <b>cs</b>.</td>
                <tr>
            </table>

            <div class="panel panel-success">
                <div class="panel-heading">
                    <h4 class="panel-title">CURL Example</h4>
                </div>

                <div class="panel-body">
                    <pre class="prettyprint">curl --form 'file=@test.zip' http://quest.ms.mff.cuni.cz:6380?language=cs</pre>
                </div>
            </div>

            <div class="panel panel-success">
                <div class="panel-heading">
                    <h4 class="panel-title">JSON Response</h4>
                </div>

                <div class="panel-body">
                    <pre class="prettyprint lang-json">{
    "keywords": ["odhad", "výběr", "úhrn", "rozvržení", "průměr"],
    "keyword_scores": [0.6033144150404524, 0.4630133659942532, 0.35208990668596857, 0.2560803125496312, 0.22390298829472924],
    "morphodita_calls": 27
}</pre>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<div id="footer"></div>

</body>
</html>
